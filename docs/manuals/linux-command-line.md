---
author: Stavis
title: "Linux command line"
description: "Памятка Linux. Командная строка"
tags: ["command line", "linux"]

---
# Коммандная строка Linux

## wc

Команда wc выводит количество строк, слов и символов в файле:

```sh
wc animals.txt
# 7 51 325 animals.txt
```

wc сообщает, что в файле animals.txt 7 строк, 51 слово и 325 символов. Если вы
посчитаете символы, включая пробелы и табуляции, то найдете только 318 сим-
волов, но wc также учитывает скрытые символы новой строки.

| Опции | Описание |
| --- | --- |
| `-l` | `lines` печатать только количество строк |
| `-w` | `words` печатать только количество слов |
| `-c` | `characters` печатать только количество символов |

### wc примеры

Отобразить колличество файлов в текущем каталоге:

```bash
ls -p | grep -v / | wc -l
```

## head

Команда head выводит первые строки файла. 
Если вы опустите параметр -n, заголовок по умолчанию будет состоять из 10 строк (-n10).
Выведем первые три строки файла `animals.txt`, используя head с параметром -n:

```bash
head -n3 animals.txt
# python Programming Python 2010 Lutz, Mark
# snail SSH, The Secure Shell 2005 Barrett, Daniel
# alpaca Intermediate Perl 2012 Schwartz, Randal
```

## cut

Команда `cut` выводит одну или несколько колонок из файла.

| Опции | Описание |
| --- | --- |
| `-f` | `filds` разделение по полям |
| `-c` | 'characters' определить поле по символам |
| `-d` | `delimiter` определить разделитель |

Команда `cut` поддерживает два способа определения, что считать колонкой.

Первый — разделение по полям (-f), когда входные данные состоят из строк (полей), 
каждая из которых разделена одним символом табуляции.
Именно такой формат используется в файле `animals.txt`. 
Команда `cut` из предыдущего примера печатает второе поле каждой строки благодаря опции -f2.
Чтобы сократить вывод, передадим его в `head`. Выведем на экран только первые три строки:

Выведем на экран только первые три строки:

```sh
cut -f2 animals.txt | head -n3
# Programming Python
# SSH, The Secure Shell
# Intermediate Perl
```

Вы также можете вырезать несколько полей, разделив их номера запятыми:

```sh
cut -f1,3 animals.txt | head -n3
# python 2010
# snail 2005
# alpaca 2012
```

или указав диапазон значений:

```sh
cut -f2-4 animals.txt | head -n3
# Programming Python 2010 Lutz, Mark
# SSH, The Secure Shell 2005 Barrett, Daniel
# Intermediate Perl 2012 Schwartz, Randal
```

Также можно определить колонку для команды cut по положению символа
в строке с использованием параметра -c. Выведем первые три символа из каж-
дой строки файла, которые можно указать либо через запятую (1, 2, 3), либо
в формате диапазона (1–3)

Допустим, что файл animals.txt состоит из нескольких тысяч строк и вам нужно извлечь только фамилии авторов.
Сначала выделим четвертое поле — имя и фамилия автора.

Затем передадим выходные данные снова в команду cut, используя параметр -d (delimiter — разделитель), 
чтобы изменить символ-разделитель на запятую вместо табуляции.
Это позволит выделить только фамилии авторов:

```sh
cut -f4 animals.txt | cut -d, -f1
# Lutz
# Barrett
# Schwartz
```

## sort
Команда sort сортирует строки файла в порядке возрастания (по умолчанию):

```sh
sort
```

| Опции | Описание |
| --- | --- |
| `-r` | сортировать в порядке убывания |
| `-n` | сортировать в числовом порядке |

Пример:

```sh
cut -f3 animals.txt | sort -n | head -n3
# 1999
# 2005
# 2005
```

## pushd, popd, dirs

Воспользуемся функцией оболочки, называемой `стеком каталогов`.
Он позволяет легко перемещаться между несколькими каталогами, используя встроенные команды оболочки `pushd`, `popd` и `dirs`.
На изучение этой функции вы потратите, может быть, 15 минут, а пользу от увеличения скорости работы будете получать всю жизнь.

### pushd Поместить каталог в стек

Команда `pushd` (сокращение от `push directory`) выполняет следующие действия:

- Добавляет заданный каталог в вершину стека.
- Выполняет cd в этот каталог.
- Выводит на экран стек сверху вниз для справки.

Я создам стек из четырех каталогов, добавляя их по одному:

```sh
pwd
# /home/smith/Work/Projects/Web/src
pushd /var/www/html
# /var/www/html ~/Work/Projects/Web/src
pushd /etc/apache2
# /etc/apache2 /var/www/html ~/Work/Projects/Web/src
pushd /etc/ssl/certs
# /etc/ssl/certs /etc/apache2 /var/www/html ~/Work/Projects/Web/src
pwd
# /etc/ssl/certs
```

Оболочка печатает стек после каждой команды pushd. Текущий каталог — левый (верхний).

### dirs Просмотр стека каталогов

Выведите на экран стек каталогов текущего экземпляра оболочки с помощью команды dirs. Она не изменяет стек:

```sh
dirs
# /etc/ssl/certs /etc/apache2 /var/www/html ~/Work/Projects/Web/src
```

Если вы предпочитаете печатать стек сверху вниз, используйте параметр -p:


```sh
dirs -p
# /etc/ssl/certs
# /etc/apache2
# /var/www/html
# ~/Work/Projects/Web/src
```

Вы можете передать вывод команде `nl` для нумерации строк с нуля.
Выполнив комманду `dirs -p | nl -v0`.
Это можно сделать еще проще, запустив `dirs -v`.
Этот параметр выводит на экран стек с пронумерованными строками:


```sh
dirs -v
# 0 /etc/ssl/certs
# 1 /etc/apache2
# 2 /var/www/html
# 3 ~/Work/Projects/Web/src
```

### popd Извлечь каталог из стека

Команда popd (pop directory) противоположна команде pushd. Она делает следующее:

- Удаляет один каталог из вершины стека.
- Выполняет команду cd в новый верхний каталог.
- Выводит на экран стек сверху вниз для справки.

### Углубиться в стек

Что делать, если вы хотите перейти в другие каталоги в стеке, помимо двух верхних? pushd и popd принимают положительный или отрицательный целочисленный аргумент для дальнейшей работы со стеком. Команда

```
pushd +N
```

сдвигает N каталогов с вершины стека вниз, а затем переходит к новому верхнему каталогу. Отрицательный аргумент (-N) сдвигает каталоги в противоположном направлении, снизу вверх, перед выполнением cd:

```
dirs
# /etc/ssl/certs ~/Work/Projects/Web/src /var/www/html /etc/apache2
pushd +1
# ~/Work/Projects/Web/src /var/www/html /etc/apache2 /etc/ssl/certs
pushd +2
# /etc/apache2 /etc/ssl/certs ~/Work/Projects/Web/src /var/www/html
```

Таким образом, вы можете перейти к любому другому каталогу в стеке с помощью простой команды. Однако если ваш стек длинный, трудно определить числовую позицию нужного каталога. Поэтому выведите числовую позицию каждого каталога с помощью dirs -v, как вы делали в разделе «Просмотр стека каталогов» на с. 82:

```
dirs -v
# 0 /etc/apache2
# 1 /etc/ssl/certs
# 2 ~/Work/Projects/Web/src
# 3 /var/www/html
```

Чтобы переместить /var/www/html на вершину стека (и сделать его текущим каталогом), запустите pushd +3.

Чтобы перейти к каталогу в нижней части стека, запустите pushd -0:

```
dirs
# /etc/apache2 /etc/ssl/certs ~/Work/Projects/Web/src /var/www/html
pushd -0
# /var/www/html /etc/apache2 /etc/ssl/certs ~/Work/Projects/Web/src
```

Вы также можете удалить каталоги из стека, используя popd с числовым аргументом. Команда

```
popd +N
```

удаляет каталог, расположенный на позиции N, из стека, считая сверху вниз. Отрицательный аргумент (-N) означает отсчет снизу стека. Подсчет начинается с нуля, поэтому popd +1 удаляет второй каталог сверху:

## env Переменные окружения

Для вывода на экран значений переменных HOME и USER запустите команду
printenv:

```sh
printenv HOME
# /home/smith
printenv USER
# smith
```

## alias

Отобразить список всех алиасов:

```sh
alias
```

Создать алиас

```sh
alias ll="ls -l"
```

## Файл animals.txt

Пример файла:

```txt
python	Programming Python	2010	Lutz, Mark
snail	SSH, The Secure Shell	2005	Barrett, Daniel
alpaca	Intermediate Perl	2012	Schwartz, Randal
robin	MySQL High Availability	2014	Bell, Charles
horse	Linux in a Nutshell	2009	Siever, Ellen
donkey	Cisco IOS in a Nutshell	2005	Boney, James
oryx	Writing Word Macros	1999	Roman, Steven
```
